language: python

python:
  - "3.6"

install:
  - pip install --upgrade pip && pip install -r requirements.txt
  - pip install coveralls

services:
  - Postgresql

before_script:
  - psql -c 'create database "test_db";' -U postgres

env:
  - APP_SETTINGS="development"
  - FLASK_APP="run.py"
  - SECRET="bfgxcvdw"
  - DATABASE_URL="postgres:LUG4Z1V4@localhost:5432/app_database"

script:
  - nosetests --exe -v --with-coverage

after_success :
  - coveralls